var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,c){b!=Array.prototype&&b!=Object.prototype&&(b[k]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,m={next:function(){if(c<b.length){var q=c++;return{value:k(q,b[q]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(b,k,c,m){if(k){c=$jscomp.global;b=b.split(".");for(m=0;m<b.length-1;m++){var q=b[m];q in c||(c[q]={});c=c[q]}b=b[b.length-1];m=c[b];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es6","es3");$jscomp.owns=function(b,k){return Object.prototype.hasOwnProperty.call(b,k)};$jscomp.polyfill("Object.values",function(b){return b?b:function(b){var c=[],k;for(k in b)$jscomp.owns(b,k)&&c.push(b[k]);return c}},"es8","es3");
(function(b,k){var c={},m=null,q={},t=tbpDynamic.field_name,r,x=function(d){if(null===m){tbpDynamic.type&&(document.body.classList.add("tbp_template_type_"+tbpDynamic.type),window.top.document.body.classList.add("tbp_template_type_"+tbpDynamic.type));var c=Themify.hash(tbpDynamic.v+Object.keys(tbpDynamic.items));m=function(){if(themifyBuilder.debug)return null;try{var a=sessionStorage.getItem("tbp_dc");if(a&&(a=JSON.parse(a),a.h===c&&a.v))return a.v}catch(g){}return null}();null===m&&b.ajax({type:"POST",
url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_fields",tb_load_nonce:themifyBuilder.tb_load_nonce},error:function(){m=null},success:function(a){m=a;try{sessionStorage.setItem("tbp_dc",JSON.stringify({v:a,h:c}))}catch(g){}d&&d()}})}else d&&d()},D=function(d,c){var a="",g="",p=function(d){if(void 0!==g||void 0!==a)d||(d=""),void 0!==g&&(d=g+d),void 0!==a&&(d+=a);c&&c(d)};if("string"!==typeof d){if(!d||void 0===d.item)return;var e=b.extend(!0,{},d);a=e.text_after;g=
e.text_before;delete e.text_before;delete e.text_after;delete e.o;e=JSON.stringify(e)}else e=d;var h;k.Forms.LayoutPart.id&&document.body.classList.contains("tbp_app_is_edit")&&(h=k.Instances.Builder[k.builderIndex].el.parentNode.id)&&(h=h.split("-")[1]);h||(h="undefined"===typeof tbp_local||void 0===tbp_local.id||tbp_local.isArchive?themifyBuilder.post_ID:tbp_local.id);var l=Themify.hash(e+h);void 0===q[l]?b.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_preview",
tb_load_nonce:themifyBuilder.tb_load_nonce,pid:h,values:e},success:function(a){q[l]=a.error?a.error:""===a.value||"false"===a.value?null:a.value;p(q[l])}}):p(q[l])},E=function(d,c){var a=ThemifyConstructor.values,g=document.createElement("div"),e=Object.values(b.extend(!0,{},m)),f=tbpDynamic.items;g.className="tbp_dynamic_content_options";for(var h=e.length-1;-1<h;--h)if("item"===e[h].id){var h=e[h].options,l;for(l in h){for(var k in h[l].options)void 0!==f[k]&&-1===f[k].type.indexOf(d)&&delete h[l].options[k];
0===Object.keys(h[l].options).length&&delete h[l]}break}void 0===c&&(c={});ThemifyConstructor.values=c;e=ThemifyConstructor.create(e);f=e.querySelectorAll(".tb_lb_option");for(h=f.length-1;-1<h;--h)f[h].classList.remove("tb_lb_option"),f[h].classList.remove("tb_lb_option_child");ThemifyConstructor.values=a;g.appendChild(e);return g},C=function(d,e){var a=d.parentNode.closest(".tb_field"),g=v(a),p=F(a),f=a.getElementsByClassName("tb_input")[0],h={};void 0!==f&&f.parentNode.classList.contains("tb_has_dc")&&
(a=f,f=null);var l=G(a,p);null!==g?void 0!==c[g]&&(f=w(a),void 0!==c[g][f]&&(h=c[g][f])):h=c;if(!0===e)if(void 0!==h[l])d.checked=!0;else return;if(!0===d.checked){a.classList.add("tbp_dc_active");var n=a.getElementsByClassName("tbp_dc_input")[0];void 0===n?(x(function(){var d=document.createElement("div");n=document.createElement("input");d.className="tbp_dc_wrap";n.className="tbp_dc_input xlarge";n.type="text";n.setAttribute("readonly",!0);var c=function(a){a=a.closest(".tbp_dc_wrap");var d=a.querySelector("#item"),
e=d.value,c=d.closest(".tb_field").nextElementSibling.children,g="field_"+e,b=[],f="field_general_"+p;n.value=d.options[d.selectedIndex].text;b.push(d.parentNode);for(var h=c.length-1;-1<h;--h)""!==e&&(c[h].classList.contains(g)||c[h].classList.contains(f))?(c[h].style.display="block",b.push(c[h])):c[h].style.display="";ThemifyConstructor.callbacks();e||(b=null);var k=y(l,b,a),b=null;D(k,function(a){null===a&&(a="image"===p?tbpDynamic.placeholder_image:"{"+k.item+"}");var c=u(d,l);if(null!==c){c.value=
a;var e=null;"wp_editor"===p&&(e=tinymce.get(c.id))&&(e.setContent(String(a)),e.fire("change"));e||(Themify.triggerEvent(c,"change"),"image"!==p&&"SELECT"!==c.nodeName&&Themify.triggerEvent(c,"keyup"))}})};n.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();var d=this.nextElementSibling;null===d&&(d=E(p,h[l]),b(d).on("change.dc_preview",":input",function(a){a.stopPropagation();c(a.target)}),this.parentNode.appendChild(d));a="block"!==d.style.display;for(var e=ThemifyBuilderCommon.Lightbox.$lightbox[0].getElementsByClassName("tbp_dynamic_content_options"),
g=e.length-1;-1<g;--g)e[g].style.display="";if(!0===a){var f=function(a){null===a.target.closest(".tbp_dc_wrap")&&(document.removeEventListener("mousedown",f,{passive:!0}),"visual"===k.mode&&window.top.document.removeEventListener("mousedown",f,{passive:!0}),d.style.display="");"visual"===k.mode&&b(document).triggerHandler("mouseup")};document.addEventListener("mousedown",f,{passive:!0});"visual"===k.mode&&window.top.document.addEventListener("mousedown",f,{passive:!0});c(this);d.style.display="block"}else d.style.display=
""});d.appendChild(n);if(void 0!==h[l]){var e=h[l].item,g=m[0].options,f;for(f in g)if(void 0!==g[f].options[e]){n.value=g[f].options[e];break}if("image"===p&&"styling"===ThemifyConstructor.clicked)for(e=a.closest(".tb_tab").getElementsByClassName("tb_image_options"),console.log(e),f=e.length-1;-1<f;--f)e[f].classList.remove("_tb_hide_binding");else ThemifyConstructor.callbacks()}a.appendChild(d)}),void 0===e&&A(a,l,p)):void 0===e&&(A(a,l,p),void 0!==h[l]&&n.click(),B(!1))}else void 0===e&&(H(a,l,
p),a.classList.remove("tbp_dc_active"),y(l,null,a),B(!0))},w=function(d){return b(d.closest(".tb_repeatable_field")).index()},v=function(d){d=d.parentNode.closest(".tb_row_js_wrapper");return null!==d?d.getAttribute("id"):null},B=function(d){if("visual"===k.mode&&"styling"===ThemifyConstructor.clicked){var c=k.liveStylingInstance.$liveStyledElmt[0].closest(".tb_active_layout_part");null===c&&(c=k.liveStylingInstance.$liveStyledElmt[0]);for(var c=c.getElementsByClassName("tbp_dc_styles"),a=c.length-
1;-1<a;--a)c[a].sheet.disabled=d}},G=function(d,c){var a="image"===c?"tb_uploader_input":null!==d.parentNode.closest(".tb_repeatable_field_content")?"tb_lb_option_child":"tb_lb_option",a=d.getElementsByClassName(a)[0],e;void 0!==a&&(e=a.getAttribute("data-input-id"));e||(e=a.getAttribute("id"));return e.trim()},y=function(d,e,a){var g=null,b=v(a);null!==b&&(g=w(a));if(null===e)if((a=JSON.parse(r.value))||(a={}),null!==g){var f=!1;if(void 0!==a[b]){if(null===d)void 0!==a[b][g]&&(f=!0,delete c[b][g],
delete a[b][g]);else if(void 0!==a[b][g]&&void 0!==a[b][g][d]){if(f=!0,delete a[b][g][d],d=Object.keys(a[b][g]).length,0===d||1===d&&void 0!==a[b][g].o)f=!0,delete c[b][g],delete a[b][g]}else return;0===Object.keys(a[b]).length&&(f=!0,delete c[b],delete a[b])}if(!1===f)return}else if(void 0!==a[d])delete a[d];else return;else{null!==g?(void 0===c[b]&&(c[b]={}),void 0===c[b][g]&&(c[b][g]={}),void 0===c[b][g][d]&&(c[b][g][d]={}),a=void 0!==c[b][g][d].o?c[b][g][d].o:null):(void 0===c[d]&&(c[d]={}),a=
void 0!==c[d].o?c[d].o:null);if(Array.isArray(e)){for(var f={},h=e.length-1;-1<h;--h)for(var l=e[h].querySelectorAll("input,textarea,select"),n=l.length-1;-1<n;--n){var m=l[n].value;""===m||l[n].parentNode.parentNode.classList.contains("_tb_hide_binding")||(f[l[n].id]=m)}e=k.Utils.clear(f)}null!==g?(c[b][g][d]=e,null!==a&&(c[b][g][d].o=a)):(c[d]=e,null!==a&&(c[d].o=a));a=c}r.value=JSON.stringify(a);return e},u=function(d,c){var a=d.closest(".tb_repeatable_field_content");return a=null!==a?a.querySelector('.tb_lb_option_child[data-input-id="'+
c+'"]'):ThemifyBuilderCommon.Lightbox.$lightbox[0].querySelector("#"+c)},A=function(d,b,a){var g=null,e=null,f=b;"wp_editor"===a?(a=tinymce.get(b),a||(a=u(d,b),a=tinymce.get(a.id)),a&&(g=a.getContent())):(a=u(d,b),null!==a&&(g=a.value));a=v(d);null!==a&&(e=w(d),f=a);null!==g&&""!==g?(void 0===c[f]&&(c[f]={}),null!==e?(void 0===c[f][e]&&(c[f][e]={}),void 0===c[f][e][b]&&(c[f][e][b]={}),c[f][e][b].o=g):c[f].o=g):void 0!==c[f]&&(null!==e?void 0!==c[f][e]&&void 0!==c[f][e][b]&&delete c[f][e][b].o:delete c[f].o);
r.value=JSON.stringify(c);return g},H=function(d,b,a){var e=v(d),k="";if(null!==e){if(void 0!==c[e]){var f=w(d);void 0!==c[e][f]&&void 0!==c[e][f][b]&&void 0!==c[e][f][b].o&&(k=c[e][f][b].o)}}else void 0!==c[b]&&void 0!==c[b].o&&(k=c[b].o);"wp_editor"===a?(a=tinymce.get(b),a||(d=u(d,b),a=tinymce.get(d.id)),a&&(a.setContent(String(k)),a.fire("change"))):(d=u(d,b),null!==d&&(d.value=k,Themify.triggerEvent(d,"change"),"image"!==a&&"SELECT"!==d.nodeName&&Themify.triggerEvent(d,"keyup")))},F=function(d){d=
d.getAttribute("data-type");"imageGradient"===d&&(d="image");return d},z=function(d){for(var b=tbpDynamic.excludes,a=tbpDynamic.d_label,c=!1,k="text image textarea wp_editor imageGradient url gallery custom_css".split(" "),f=k.length-1;-1<f;--f)for(var h=d.querySelectorAll('.tb_field[data-type="'+k[f]+'"]'),l=h.length-1;-1<l;--l)if(!h[l].classList.contains("tb_has_dc")&&!h[l].classList.contains("tb_disable_dc")){for(var c=!1,n=b.length-1;-1<n;--n)if(h[l].classList.contains(b[n])){c=!0;break}if(!1===
c){h[l].className+=" tb_has_dc";var c=document.createElement("label"),n=document.createElement("input"),m=document.createElement("div");c.className="tpb_dc_toggle switch-wrapper";n.type="checkbox";n.className="toggle_switch";m.className="switch_label";m.setAttribute("data-on",a);m.setAttribute("data-off",a);n.addEventListener("change",function(a){a.stopPropagation();C(this)},{passive:!0});c.appendChild(n);c.appendChild(m);h[l].insertBefore(c,h[l].firstChild);C(n,!0)}}};b(window).one("load",function(){if("visual"!==
k.mode||!0===Themify.is_builder_loaded)setTimeout(x,1500);else window.top.Themify.body.one("themify_builder_ready",function(b){setTimeout(x,2500)});b(document).on("tb_repeatable_add_new tb_repeatable_duplicate tb_repeatable_delete",function(b){"tb_repeatable_delete"===b.type?y(null,null,b.detail[0]):z(b.detail[0])}).on("tb_editing_module tb_editing_row tb_editing_column tb_editing_subrow",function(d){d=ThemifyConstructor;var e=ThemifyBuilderCommon.Lightbox.$lightbox[0];r=d.hidden.render({type:"hidden",
"class":"exclude-from-reset-field",responsive:!1,control:!1,id:t},d);if(void 0!==d.values[t])try{c="string"===typeof d.values[t]?JSON.parse(d.values[t]):b.extend(!0,{},d.values[t]),r.value=JSON.stringify(c)}catch(a){c={}}else c={};e.getElementsByClassName("tb_options_tab_content")[0].appendChild(r);z(e)});Themify.body.on("themify_builder_tabsactive tb_options_expand",function(b,c,a){if(null!==k.activeModel){var d=ThemifyConstructor.clicked;setTimeout(function(){d=ThemifyConstructor.clicked;"animation"!==
d&&"visibility"!==d&&("tb_options_expand"===b.type&&(a=c,c=null),"styling"===d&&null!==c&&-1!==c.indexOf("_h")||z(a))},"setting"===d?0:50)}})})})(jQuery,tb_app);
